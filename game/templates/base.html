{% load static %}
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="csrf-token" content="{{ csrf_token }}">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Tic-Tac-Toe</title>
        <meta name="description" content="">

        <link rel="stylesheet" href="{% static 'css/normalize.css' %}">
        <link rel="stylesheet" href="{% static 'css/main.css' %}">

        <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.3/howler.min.js"></script>
        <script src="{% static 'js/music.js' %}"></script>
        <script src="{% static 'js/main.js' %}"></script>
    </head>

    <body>

    <a href="#" class="profile-button" id="profile-button"
        data-auth="{% if user.is_authenticated %}true{% else %}false{% endif %}"
        data-profile-url="{% url 'game:profile' %}">
        {% if user.is_authenticated %}
        <img src="{% static 'images/gamer.png' %}" alt="Profile" style="width:100px; height:40px; vertical-align:middle;">
        {% else %}ðŸ‘¤{% endif %}
    </a>

    <a href="{% url 'game:how_to_play' %}" class="help-button" id="help-button">?</a>

 <div class="tictactoe-container">

        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>
        <div class="tictactoe-image"></div>

    </div>
    <div class="menu-container">
        {% block body %}
        {% endblock %}
    </div>

    <div id="how-to-play-modal" class="modal-htp">
    <div class="modal-htp-content">
        <span class="close-modal-htp">&times;</span>
        <div class="how-to-play-content">
            <!-- Content will be loaded here via AJAX -->
        </div>
    </div>
    </div>

<div id="profile-modal" class="modal-htp">
    <div class="modal-htp-content profile-modal-centered">
        <span class="close-modal-htp">&times;</span>
        <div class="profile-content">
            {% if user.is_authenticated %}
                <h2>Welcome, {{ user.username }}</h2>
                <a href="{% url 'logout' %}" class="button">Logout</a>
            {% else %}
                <h2>Login</h2>
                <form method="post" action="{% url 'login' %}">
                    {% csrf_token %}
                    <input type="text" name="username" placeholder="Username" required>
                    <input type="password" name="password" placeholder="Password" required>
                    <button type="submit" class="button">Login</button>
                </form>
                <p>Don't have an account?
                    <a href="{% url 'signup' %}" class="text-link signup-link">Sign up</a>
                </p>
                <a href="{% url 'game:main_menu_guest' %}" class="button guest-button">Continue as Guest</a>
            {% endif %}
        </div>
    </div>
</div>


    </body>
</html>

<style>
.signup-container {
    max-width: 400px;
    margin: 0 auto;
    padding: 20px;
    text-align: center;
}

.signup-container input {
    width: 100%;
    padding: 10px;
    margin: 10px 0;
    border-radius: 8px;
    border: 1px solid #ccc;
}

.signup-container button {
    width: 100%;
    padding: 10px;
    margin-top: 20px;
    background-color: #007bff;
    color: white;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    font-size: 18px;
}

.signup-container button:hover {
    background-color: #0056b3;
}

.already-account {
    margin-top: 15px;
}

.signup-link {
    color: #007bff;
    text-decoration: underline;
    font-weight: bold;
}
.signup-link:hover {
    color: #0056b3;
}

/* Center profile modal content */
.profile-modal-centered {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}
.profile-modal-centered .profile-content {
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
}

/* Profile button hover like help button */
.profile-button {
    transition: all 0.3s ease;
}
.profile-button:hover {
    background-color: #45a049;
    transform: scale(1.1);
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}

/* Center and space form fields in profile modal */
.profile-content form {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    margin-top: 28px; /* More gap between title and form */
}
.profile-content form input,
.profile-content form button {
    width: 220px;
    max-width: 90%;
    margin-bottom: 18px;
    margin-left: auto;
    margin-right: auto;
    display: block;
    text-align: center;
    font-size: 16px;
}
.profile-content form input {
    margin-top: 10px;
}
</style>
